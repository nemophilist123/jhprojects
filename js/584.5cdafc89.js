"use strict";(self["webpackChunkjinghe"]=self["webpackChunkjinghe"]||[]).push([[584],{27584:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});a(35581);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"energyTrendAnalysis"},[t("div",{staticClass:"left border-box tree"},[t("el-tree",{attrs:{"default-expand-all":!0,"expand-on-click-node":!1,data:e.data,props:e.defaultProps},on:{"node-click":e.nodeClick}})],1),t("div",{staticClass:"right border-box"},[t("div",{staticClass:"search chartSearch"},[t("div",[t("span",[e._v("能源类型")]),t("el-select",{attrs:{placeholder:""},model:{value:e.energyVal,callback:function(t){e.energyVal=t},expression:"energyVal"}},e._l(e.energyOption,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("div",[t("el-date-picker",{attrs:{type:"date",placeholder:"","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.date1,callback:function(t){e.date1=t},expression:"date1"}})],1),t("div",{staticStyle:{color:"#00b4fe"}},[e._v("至")]),t("div",[t("el-date-picker",{attrs:{type:"date",placeholder:"","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.date2,callback:function(t){e.date2=t},expression:"date2"}})],1),t("div",{staticClass:"tabAll"},e._l(e.timeTab,(function(a,n){return t("div",{key:n,class:{isActive:n==e.tTIndex},on:{click:function(t){return e.changeTimeTab(n)}}},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"tabAll1"},[t("div",e._l(e.tab,(function(a,n){return t("div",{key:n,class:{isTabActive:e.tabIndex==n},on:{click:function(t){return e.changeIndex(n)}}},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticStyle:{position:"relative",height:"300px"}},[t("div",{staticClass:"tabel"},[t("el-table",{attrs:{data:e.tableData,height:"300"}},[e._l(e.tableHeader,(function(a,n){return[t("el-table-column",{key:n,attrs:{label:a.name,width:a.with},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getRowData(t.row,a.key,a.name))+" ")]}}],null,!0)})]}))],2)],1)]),t("div",{staticClass:"border-box chart",staticStyle:{"flex-grow":"1"}},[t("e-Chart",{attrs:{arry:e.echartData}})],1)])])},i=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"Pechart"},[t("div",{ref:"echart",staticClass:"echart"})])},s=[],l={props:{arry:{type:Object,default:()=>[]}},data(){return{}},watch:{arry(e){this.setEchart(e)}},mounted(){},methods:{setEchart(e){let t=this.$refs.echart,a=this.$echarts.init(t),n={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{top:"2%",textStyle:{color:"#fff"},type:"scroll",orient:"horizontal",pageTextStyle:{color:"#ffffff"},pageIconColor:"#2C86FF",pageIconInactiveColor:"rgba(44,132,251,0.40)",pageIconSize:10,data:e.data_3,selected:e.data_4},grid:{left:"3%",right:"5%",bottom:"2%",top:"10%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:e.data_1,axisLabel:{show:!0,textStyle:{color:"#ffffff"}},axisTick:{show:!1}}],yAxis:[{type:"value",axisLabel:{show:!0,textStyle:{color:"#ffffff"}},splitLine:{show:!0,lineStyle:{color:["rgba(255, 255, 255, 0.5)"],type:"dashed"}}}],series:e.data_2};a.setOption(n),window.addEventListener("resize",(function(){a.resize()}))}}},o=l,c=a(1001),h=(0,c.Z)(o,r,s,!1,null,"82fa86a4",null),d=h.exports,y=a(8745),u={components:{eChart:d},data(){return{timeTab:["日","月","年"],tTIndex:0,data:[],defaultProps:{children:"children",label:"label"},energyOption:["标煤","电","冷凝水","自来水","蒸汽","天然气","氮气","压缩空气","中水"],energyVal:"标煤",date1:"",date2:"",tableData:[],areaId:"",tab:["园区能耗","企业能耗","设备能耗"],tabIndex:0,tableHeader:[],echartData:{}}},mounted(){this.date2=this.date1=this.$getDate().year+"-"+this.$getDate().month+"-"+this.$getDate().day,this.placesFun()},methods:{getRowData(e,t,a){let n=e[t];return"标煤"!=a&&"电"!=a||(n=this.toFixedTwo(n)),n},nodeClick(e){e.isClick&&(this.areaId=e.id,this.energyBalanceFun())},placesFun(){(0,y.x6)().then((e=>{let t=!1;e.content.forEach((e=>{let a=e.id.substring(0,1);"A"==a||"C"==a?(e["isClick"]=!0,t||(this.areaId=e.id,t=!0)):e["isClick"]=!1})),this.data=this.$arrToTree(e.content),this.energyBalanceFun()})).catch((e=>{}))},energyBalanceFun(){(0,y.WI)(this.timeTab[this.tTIndex],this.energyVal,this.date1,this.date2,this.areaId).then((e=>{const{content:t,errmsg:a,errcode:n}=e;0==n&&(this.balanceContent=t,this.searchData())})).catch((e=>{}))},changeTimeTab(e){this.tTIndex=e,this.energyBalanceFun()},changeIndex(e){this.tabIndex=e,this.searchData()},searchData(){0==this.tabIndex?(this.tableData=this.balanceContent.area,this.tableHeader=[{name:"园区编号",key:"AreaId1",with:"150"},{name:"园区名称",key:"AreaName1",with:"150"},{name:"日期",key:"DateStr1",with:"150"},{name:"标煤",key:"TCEQty1",with:""},{name:"电",key:"ElecQty1",with:""},{name:"水",key:"WaterQty1",with:""},{name:"蒸汽",key:"SteamQty1",with:""},{name:"天然气",key:"GasQty1",with:""},{name:"氮气",key:"N21",with:""},{name:"压缩空气",key:"CompressedAirQty1",with:""}],this.echartData={data_1:this.balanceContent.areazhe.data1_1,data_2:this.balanceContent.areazhe.data1_2,data_3:this.balanceContent.areazhe.data1_3,data_4:this.balanceContent.areazhe.data1_4}):1==this.tabIndex?(this.tableData=this.balanceContent.company,this.tableHeader=[{name:"企业编号",key:"CompanyId2",with:"150"},{name:"企业名称",key:"CompanyName2",with:"150"},{name:"日期",key:"DateStr2",with:"150"},{name:"标煤",key:"TCEQty2",with:""},{name:"电",key:"ElecQty2",with:""},{name:"水",key:"WaterQty2",with:""},{name:"蒸汽",key:"SteamQty2",with:""},{name:"天然气",key:"GasQty2",with:""},{name:"氮气",key:"N22",with:""},{name:"压缩空气",key:"CompressedAirQty2",with:""}],this.echartData={data_1:this.balanceContent.companyzhe.data2_1,data_2:this.balanceContent.companyzhe.data2_2,data_3:this.balanceContent.companyzhe.data2_3,data_4:this.balanceContent.companyzhe.data2_4}):(this.tableData=this.balanceContent.eqm,this.tableHeader=[{name:"所属企业编号",key:"CompanyId3",with:"150"},{name:"所属企业名称",key:"CompanyName3",with:"150"},{name:"设备编号",key:"EnergyEqmId3",with:"150"},{name:"设备名称",key:"EnergyEqmName3",with:"150"},{name:"日期",key:"DateStr3",with:"150"},{name:"标煤",key:"TCEQty3",with:""},{name:"电",key:"ElecQty3",with:""},{name:"电(尖)",key:"ElecJQty3",with:""},{name:"电(峰)",key:"ElecFQty3",with:""},{name:"电(平)",key:"ElecPQty3",with:""},{name:"电(谷)",key:"ElecGQty3",with:""},{name:"水",key:"WaterQty3",with:""},{name:"蒸汽",key:"SteamQty3",with:""},{name:"天然气",key:"GasQty3",with:""},{name:"氮气",key:"N23",with:""},{name:"压缩空气",key:"CompressedAirQty3",with:""}],this.echartData={data_1:this.balanceContent.eqmzhe.data3_1,data_2:this.balanceContent.eqmzhe.data3_2,data_3:this.balanceContent.eqmzhe.data3_3,data_4:this.balanceContent.eqmzhe.data3_4})},toFixedTwo(e){if(0==e)return 0;if(e){let t=e;return this.$isInteger(e)||(t=t.toFixed(2)),t}}}},m=u,b=(0,c.Z)(m,n,i,!1,null,"f3ddeab4",null),p=b.exports},35581:function(e,t,a){var n=a(82109),i=a(11572),r=a(45656),s=Array;n({target:"Array",proto:!0},{with:function(e,t){return i(r(this),s,e,t)}})},8745:function(e,t,a){a.d(t,{Jw:function(){return o},KQ:function(){return r},WI:function(){return c},bv:function(){return s},d1:function(){return l},x6:function(){return i}});var n=a(88304);function i(){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/places",method:"POST"})}function r(){return(0,n.W)({url:"/web/apps/gongqi.hsb.elec/elecDrawAction/places",method:"POST"})}function s(){return(0,n.W)({method:"POST"})}function l(){return(0,n.W)({url:"/web/apps/gongqi.hsb.pv/pvStationTwoAction/places",method:"POST"})}function o(e,t,a,i,r){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyTrend?dateType="+e+"&energyType="+t+"&fromDate="+a+"&id="+r+"&toDate="+i,method:"POST"})}function c(e,t,a,i,r){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyBalance?dateType="+e+"&energyType="+t+"&fromDate="+a+"&id="+r+"&toDate="+i,method:"POST"})}}}]);
//# sourceMappingURL=584.5cdafc89.js.map