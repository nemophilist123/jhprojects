"use strict";(self["webpackChunkjinghe"]=self["webpackChunkjinghe"]||[]).push([[39],{39:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"usePlan"},[t("div",{staticClass:"search"},[t("div",[t("el-date-picker",{attrs:{type:"date",placeholder:"","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.energyTrendPlanFun},model:{value:e.date1,callback:function(t){e.date1=t},expression:"date1"}})],1),t("div",{staticStyle:{color:"#00b4fe"}},[e._v("至")]),t("div",[t("el-date-picker",{attrs:{type:"date",placeholder:"","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.energyTrendPlanFun},model:{value:e.date2,callback:function(t){e.date2=t},expression:"date2"}})],1),t("div",{staticClass:"tabAll"},e._l(e.timeTab,(function(a,n){return t("div",{key:n,class:{isActive:n==e.tTIndex},on:{click:function(t){return e.changeTimeTab(n)}}},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"right"},[t("el-table",{staticStyle:{width:"100%","margin-top":"0.2rem"},attrs:{data:e.tableData,height:"100%"}},[t("el-table-column",{attrs:{prop:"CompanyId",label:"企业编号"}}),t("el-table-column",{attrs:{prop:"CompanyName",label:"企业名称"}}),t("el-table-column",{attrs:{prop:"EnergyTypeStr",label:"能源类型"}}),t("el-table-column",{attrs:{prop:"UseQty",label:"当前用量"}}),t("el-table-column",{attrs:{prop:"PlanNum",label:"产值计划值"}}),t("el-table-column",{attrs:{prop:"UsePlanNum",label:"用量计划值"}}),t("el-table-column",{attrs:{prop:"UseQtyRatio",label:"环比"}}),t("el-table-column",{attrs:{prop:"QOQ",label:"用量占比"}}),t("el-table-column",{attrs:{prop:"UnitId",label:"单位"}}),t("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleClick(a.row)}}},[e._v("修改")])]}}])})],1)],1),t("el-dialog",{attrs:{title:"修改计划值",visible:e.dialogFormVisible,modal:!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"日产值计划值","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.dayPlanNum,callback:function(t){e.$set(e.form,"dayPlanNum",t)},expression:"form.dayPlanNum"}})],1),t("el-form-item",{attrs:{label:"日用量计划值","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.dayUsePlanNum,callback:function(t){e.$set(e.form,"dayUsePlanNum",t)},expression:"form.dayUsePlanNum"}})],1),t("el-form-item",{attrs:{label:"月产值计划值","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.monthPlanNum,callback:function(t){e.$set(e.form,"monthPlanNum",t)},expression:"form.monthPlanNum"}})],1),t("el-form-item",{attrs:{label:"月用量计划值","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.monthUsePlanNumd,callback:function(t){e.$set(e.form,"monthUsePlanNumd",t)},expression:"form.monthUsePlanNumd"}})],1),t("el-form-item",{attrs:{label:"年产值计划值","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.yearPlanNum,callback:function(t){e.$set(e.form,"yearPlanNum",t)},expression:"form.yearPlanNum"}})],1),t("el-form-item",{attrs:{label:"年用量计划值","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.yearUsePlanNum,callback:function(t){e.$set(e.form,"yearUsePlanNum",t)},expression:"form.yearUsePlanNum"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("确 定")])],1)],1)],1)},l=[],r=(a(8745),a(88304));function o(e){return(0,r.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/planQuery?id="+e,method:"POST"})}function i(e,t,a){return(0,r.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyTrendPlan?dateType="+e+"&fromDate="+t+"&id="+sessionStorage.getItem("companyId")+"&toDate="+a,method:"POST"})}function m(e,t,a,n,l,o,i){return(0,r.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/planUpdate?dayPlanNum="+e+"&dayUsePlanNum="+t+"&id="+a+"&monthPlanNum="+n+"&monthUsePlanNumd="+l+"&yearPlanNum="+o+"&yearUsePlanNum="+i,method:"POST"})}var s={data(){return{form:{dayPlanNum:"",dayUsePlanNum:"",monthPlanNum:"",monthUsePlanNumd:"",yearPlanNum:"",yearUsePlanNum:""},formLabelWidth:"120px",dialogFormVisible:!1,timeTab:["日","月","年"],tTIndex:0,tableData:[],date1:"",date2:""}},mounted(){this.date1=this.date2=this.$getDate().year+"-"+this.$getDate().month+"-"+this.$getDate().day,this.energyTrendPlanFun()},methods:{changeTimeTab(e){this.tTIndex=e,this.energyTrendPlanFun()},energyTrendPlanFun(){i(this.timeTab[this.tTIndex],this.date1,this.date2).then((e=>{const{errcode:t,errmsg:a,content:n}=e;0==t&&(this.tableData=n)})).catch((e=>{}))},handleClick(e){this.row=e,this.dialogFormVisible=!0,this.planQueryFun(e.CompanyId)},planQueryFun(e){o(e).then((e=>{const{errcode:t,errmsg:a,content:n}=e;0==t&&(this.form={dayPlanNum:n.dayPlanNum,dayUsePlanNum:n.dayUsePlanNum,monthPlanNum:n.monthPlanNum,monthUsePlanNumd:n.monthUsePlanNum,yearPlanNum:n.yearPlanNum,yearUsePlanNum:n.yearUsePlanNum})})).catch((e=>{}))},confirm(){this.dialogFormVisible=!1,this.planUpdateFun()},planUpdateFun(){m(this.form.dayPlanNum,this.form.dayUsePlanNum,this.row.CompanyId,this.form.monthPlanNum,this.form.monthUsePlanNumd,this.form.yearPlanNum,this.form.yearUsePlanNum).then((e=>{const{errcode:t,errmsg:a,content:n}=e;0==t&&this.energyTrendPlanFun()})).catch((e=>{}))}}},u=s,d=a(1001),c=(0,d.Z)(u,n,l,!1,null,"7e1ec50e",null),f=c.exports},8745:function(e,t,a){a.d(t,{Jw:function(){return m},KQ:function(){return r},WI:function(){return s},bv:function(){return o},d1:function(){return i},x6:function(){return l}});var n=a(88304);function l(){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/places",method:"POST"})}function r(){return(0,n.W)({url:"/web/apps/gongqi.hsb.elec/elecDrawAction/places",method:"POST"})}function o(){return(0,n.W)({method:"POST"})}function i(){return(0,n.W)({url:"/web/apps/gongqi.hsb.pv/pvStationTwoAction/places",method:"POST"})}function m(e,t,a,l,r){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyTrend?dateType="+e+"&energyType="+t+"&fromDate="+a+"&id="+r+"&toDate="+l,method:"POST"})}function s(e,t,a,l,r){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyBalance?dateType="+e+"&energyType="+t+"&fromDate="+a+"&id="+r+"&toDate="+l,method:"POST"})}}}]);
//# sourceMappingURL=39.35945514.js.map