"use strict";(self["webpackChunkjinghe"]=self["webpackChunkjinghe"]||[]).push([[857],{25857:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"energyContrast"},[t("div",{staticClass:"search"},[t("div",[t("span",[e._v("企业")]),t("el-select",{attrs:{placeholder:""},on:{change:e.energyCompareFun},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return t("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),t("div",[t("span",[e._v("能源类型")]),t("el-select",{attrs:{placeholder:""},on:{change:e.energyCompareFun},model:{value:e.energyVal,callback:function(t){e.energyVal=t},expression:"energyVal"}},e._l(e.energyOption,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("div",{staticStyle:{"margin-right":"0.2rem"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"",clearable:!1},on:{change:e.energyCompareFun},model:{value:e.date1,callback:function(t){e.date1=t},expression:"date1"}})],1),t("div",{staticStyle:{"margin-right":"0.2rem",color:"#00b4fe"}},[e._v("至")]),t("div",[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"",clearable:!1},on:{change:e.energyCompareFun},model:{value:e.date2,callback:function(t){e.date2=t},expression:"date2"}})],1)]),t("div",{ref:"chart",staticClass:"chart"})])},o=[],r=(a(57658),a(45473)),s=a(88304);function i(e,t,a,n){return(0,s.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyCompare?companyId="+e+"&energyType="+t+"&fromDate="+a+"&toDate="+n,method:"POST"})}var l={data(){return{value:"",options:[],date1:"",date2:"",energyOption:["电","冷凝水","自来水","蒸汽","天然气","氮气","压缩空气","中水"],energyVal:"电"}},mounted(){this.date2=this.date1=this.$getDate().year+"-"+this.$getDate().month+"-"+this.$getDate().day,this.companyListFun()},methods:{companyListFun(){(0,r.P)().then((e=>{const{content:t,errcode:a,errmsg:n}=e;0==a&&(this.options=t.companyList,this.value=t.companyList[0].companyId,this.energyCompareFun())})).catch((e=>{}))},energyCompareFun(){i(this.value,this.energyVal,this.date1,this.date2).then((e=>{const{content:t,errcode:a,errmsg:n}=e;if(0==a){let e=[],a=[];t.forEach(((t,n)=>{let o=Object.keys(t)[0];e.push(o),t[o].forEach((e=>{let t=Object.keys(e)[0];0==n?a.push({name:t,type:"bar",z:1,smooth:!0,emphasis:{focus:"series"},itemStyle:{},data:[e[t].Value]}):a.forEach((a=>{a.name==t&&a.data.push(e[t].Value)}))}))})),this.setEchart(e,a)}})).catch((e=>{}))},setEchart(e,t){let a=this.$refs.chart,n=this.$echarts.init(a);n.clear();let o={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{top:"2%",textStyle:{color:"#fff"},type:"scroll",orient:"horizontal",pageTextStyle:{color:"#ffffff"},pageIconColor:"#2C86FF",pageIconInactiveColor:"rgba(44,132,251,0.40)",pageIconSize:10},grid:{left:"3%",right:"0%",bottom:"2%",top:"8%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:e,axisLabel:{show:!0,textStyle:{color:"#ffffff"}},axisTick:{show:!1}}],yAxis:[{type:"value",axisLabel:{show:!0,textStyle:{color:"#ffffff"}},splitLine:{show:!0,lineStyle:{color:["rgba(255, 255, 255, 0.5)"],type:"dashed"}}}],series:t};n.setOption(o),window.addEventListener("resize",(function(){n.resize()}))}}},c=l,p=a(1001),y=(0,p.Z)(c,n,o,!1,null,"6fe6b36a",null),u=y.exports},45473:function(e,t,a){a.d(t,{P:function(){return o},o:function(){return r}});var n=a(88304);function o(){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/companyList?areaId="+sessionStorage.getItem("companyId"),method:"POST"})}function r(e,t,a,o){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyFlowTo?companyId="+e+"&energyType="+t+"&fromDate="+a+"&toDate="+o,method:"POST"})}}}]);
//# sourceMappingURL=857.006c9339.js.map