"use strict";(self["webpackChunkjinghe"]=self["webpackChunkjinghe"]||[]).push([[707],{11707:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"parameterManage"},[t("div",{staticClass:"table"},[t("div",{staticStyle:{"flex-grow":"1",position:"relative"}},[t("eleWarn")],1)])])},o=[],r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",display:"flex","flex-direction":"column"}},[t("div",{staticClass:"right"},[t("div",{staticClass:"search chartSearch"},[t("div",[t("span",[e._v("企业")]),t("el-select",{attrs:{placeholder:""},on:{change:e.companyChange},model:{value:e.companyVal,callback:function(t){e.companyVal=t},expression:"companyVal"}},e._l(e.companyOption,(function(e){return t("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),t("div",[t("span",[e._v("状态")]),t("el-select",{attrs:{placeholder:""},model:{value:e.stateVal,callback:function(t){e.stateVal=t},expression:"stateVal"}},e._l(e.stateOption,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:a}})})),1)],1),t("div",[t("span",[e._v("电站名称")]),t("el-input",{attrs:{autocomplete:"off"},on:{input:e.elecStationNameChange},model:{value:e.elecStationName,callback:function(t){e.elecStationName=t},expression:"elecStationName"}})],1)]),t("div",{staticClass:"tabel"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100%"}},[t("el-table-column",{attrs:{prop:"alarmId",label:"告警编号",width:"150"}}),t("el-table-column",{attrs:{prop:"placeId",label:"区域"}}),t("el-table-column",{attrs:{prop:"areaName",label:"园区",width:"150"}}),t("el-table-column",{attrs:{prop:"companyName",label:"企业",width:"160"}}),t("el-table-column",{attrs:{prop:"elecStationName",label:"电站名称",width:"150"}}),t("el-table-column",{attrs:{prop:"elecEqmId",label:"设备编号",width:"150"}}),t("el-table-column",{attrs:{prop:"elecPointUnitId",label:"测点类型"}}),t("el-table-column",{attrs:{prop:"elecPointId",label:"测点编号",width:"150"}}),t("el-table-column",{attrs:{prop:"dATA_VALUE",label:"当前值"}}),t("el-table-column",{attrs:{prop:"alarmDate",label:"告警日期",width:"150"}}),t("el-table-column",{attrs:{prop:"alarmTime",label:"告警时间"}}),t("el-table-column",{attrs:{prop:"alarmState",label:"告警状态"}}),t("el-table-column",{attrs:{prop:"solver",label:"处理工程师",width:"150"}}),t("el-table-column",{attrs:{prop:"checkContent",label:"勘察情况"}}),t("el-table-column",{attrs:{prop:"alarmType",label:"告警类型"}}),t("el-table-column",{attrs:{prop:"solverRemark",label:"解决备注"}}),t("el-table-column",{attrs:{prop:"solverDate",label:"解决日期",width:"150"}}),t("el-table-column",{staticStyle:{background:"#fff"},attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"}},[e._v("归档")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.delFun(a.row)}}},[e._v("处理")])]}}])})],1)],1),t("el-pagination",{staticStyle:{"margin-top":"0.1rem"},attrs:{background:"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),t("workAlarmDialog",{ref:"dialog"})],1)},n=[],i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"",visible:e.dialogFormVisible,modal:!1,top:"17vh"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"勘察情况","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.checkContent,callback:function(t){e.$set(e.form,"checkContent",t)},expression:"form.checkContent"}})],1),t("el-form-item",{attrs:{label:"解决备注","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.solverRemark,callback:function(t){e.$set(e.form,"solverRemark",t)},expression:"form.solverRemark"}})],1),t("el-form-item",{attrs:{label:"解决日期","label-width":e.formLabelWidth}},[t("el-date-picker",{attrs:{type:"date",placeholder:"","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.form.solverDate,callback:function(t){e.$set(e.form,"solverDate",t)},expression:"form.solverDate"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.workAlarmFun()}}},[e._v("确 定")])],1)],1)],1)},s=[],c=a(72021),m={data(){return{dialogFormVisible:!1,form:{checkContent:"",solverRemark:"",solverDate:"",alarmId:""},formLabelWidth:"120px"}},watch:{dialogFormVisible(e){0==e&&(this.form={checkContent:"",solverRemark:"",solverDate:"",alarmId:""})}},mounted(){},methods:{showDialogFun(e){this.dialogFormVisible=!0,this.form.alarmId=e,this.form.solverDate=this.$getDate().year+"-"+this.$getDate().month+"-"+this.$getDate().day,this.alarmId=e},workAlarmFun(){(0,c.OH)(this.alarmId,this.form.checkContent,this.form.solverDate,this.form.solverRemark).then((e=>{const{content:t,errcode:a,errmsg:l}=e;0==a?(this.$message({message:"处理成功!",type:"success"}),this.$bus.$emit("workRefsh",!0),this.dialogFormVisible=!1):this.$message.error(l)})).catch((e=>{}))}}},u=m,p=a(1001),d=(0,p.Z)(u,i,s,!1,null,"c061d164",null),h=d.exports,b={components:{workAlarmDialog:h},data(){return{date1:"",date2:"",companyOption:[],companyVal:"",eqmOption:[],eqmVal:"",pointOption:[],pointVal:"",stateOption:["全部","告警","已处理","已确认"],stateVal:0,tableData:[],arry:{},elecStationName:"",currentPage:0,total:0,eleTimeout:null}},created(){this.$bus.$on("workRefsh",(e=>{this.elecAlarmQueryFun()}))},mounted(){this.date2=this.date1=this.$getDate().year+"-"+this.$getDate().month+"-"+this.$getDate().day,this.companyListFun(),this.elecAlarmQueryFun()},methods:{elecStationNameChange(){clearTimeout(this.eleTimeout),this.eleTimeout=setTimeout((()=>{this.elecAlarmQueryFun()}),1e3)},companyChange(){this.elecAlarmQueryFun()},eqmChange(){this.pointListFun(),this.elecAlarmQueryFun()},pointChange(){this.elecAlarmQueryFun()},handleCurrentChange(e){this.currentPage=e,this.elecAlarmQueryFun()},delFun(e){this.$refs.dialog.showDialogFun(e.alarmId)}}},f=b,g=(0,p.Z)(f,r,n,!1,null,"e8ab0350",null),y=g.exports,v={components:{eleWarn:y},data(){return{}},mounted(){},methods:{}},k=v,w=(0,p.Z)(k,l,o,!1,null,"14f4be68",null),A=w.exports},72021:function(e,t,a){a.d(t,{Js:function(){return c},KX:function(){return m},OH:function(){return o},OM:function(){return r},QA:function(){return i},a2:function(){return n},oy:function(){return s}});var l=a(88304);function o(e,t,a,o){return(0,l.W)({url:"/web/apps/gongqi.hsb.elec/elecTwoAction/workAlarm?alarmId="+e+"&checkContent="+t+"&solverDate="+a+"&solverRemark="+o,method:"POST"})}function r(e,t,a,o){return(0,l.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyAlarmQuery?fromDate="+e+"&id="+t+"&pageIndex="+a+"&toDate="+o,method:"POST"})}function n(e){return(0,l.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyAlarmLine?alarmId="+e,method:"POST"})}function i(e,t,a,o){return(0,l.W)({url:"/web/apps/gongqi.hsb.pv/pvAlarmAction/pvAlarmQuery?fromDate="+e+"&id="+t+"&pageIndex="+a+"&toDate="+o,method:"POST"})}function s(){return(0,l.W)({url:"/web/apps/gongqi.hsb.energy/energyTwoAction/companyList?areaId="+sessionStorage.getItem("companyId"),method:"POST"})}function c(e){return(0,l.W)({url:"/web/apps/gongqi.hsb.energy/energyTwoAction/equipmentList?companyId="+e,method:"POST"})}function m(e,t,a){return(0,l.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyAlarmAddUpdateDelete",params:{alarmId:e,dateStr:t,type:a},method:"POST"})}}}]);
//# sourceMappingURL=707.463d33b0.js.map