"use strict";(self["webpackChunkjinghe"]=self["webpackChunkjinghe"]||[]).push([[712],{84712:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"parameterManage"},[t("div",{staticClass:"left border-box tree"},[t("el-tree",{attrs:{"default-expand-all":!0,"expand-on-click-node":!1,data:e.data,props:e.defaultProps},on:{"node-click":e.nodeClick}})],1),t("div",{staticClass:"table"},[t("div",{staticClass:"tabs"},e._l(e.tabsArry,(function(a,n){return t("div",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"item.show"}],key:n,class:{isTabActive:n==e.tabIndex},on:{click:function(t){return e.changeTab(n)}}},[e._v(" "+e._s(a.name)+" ")])})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tabIndex>=0,expression:"tabIndex >= 0"}],staticStyle:{padding:"0.22rem","flex-grow":"1",display:"flex","flex-direction":"column"}},[t("div",{staticStyle:{"flex-shink":"0"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"250",stripe:""},on:{"row-click":e.rowClick}},[e._l(e.tableHeader,(function(e,a){return[t("el-table-column",{key:a,attrs:{prop:e.key,label:e.name}})]}))],2)],1),t("div",{staticClass:"pointBlock"},[t("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"0.2rem"}},[t("p",{staticStyle:{"flex-grow":"1"}},[e._v("测量点")]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("div",[t("el-date-picker",{attrs:{type:"date",placeholder:"","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.date1,callback:function(t){e.date1=t},expression:"date1"}})],1),t("div",{staticStyle:{color:"#00b4fe",padding:"0 0.2rem"}},[e._v("至")]),t("div",[t("el-date-picker",{attrs:{type:"date",placeholder:"","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.date2,callback:function(t){e.date2=t},expression:"date2"}})],1),t("button",{staticClass:"searchBth",on:{click:function(t){return e.pointQueryFun()}}},[e._v("查询")])])]),t("div",{staticStyle:{"flex-grow":"1"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subTableData,height:"100%",stripe:""}},[e._l(e.subTableHeader,(function(e,a){return[t("el-table-column",{key:a,attrs:{prop:e.key,label:e.name}})]}))],2)],1)])])]),t("pointDialog",{ref:"pDialog"})],1)},i=[],s=(a(57658),a(83500)),r=a(88304);function l(e){return(0,r.W)({url:"/web/apps/gongqi.hsb.elec/elecEqmTable/pointList?elecEqmId="+e,method:"GET"})}function o(e){return(0,r.W)({url:"/web/apps/gongqi.hsb.energy/energyEqmTable/pointList?eqmId="+e,method:"GET"})}function c(e){return(0,r.W)({url:"/web/apps/gongqi.hsb.pv/pvEqmTable/pointList?pvEqmId="+e,method:"GET"})}function h(e,t,a){return(0,r.W)({url:"/web/apps/gongqi.hsb.pv/pvEqmTable/pointQuery?pvEqmId="+e+"&fromDate="+t+"&toDate="+a,method:"GET"})}function d(e,t,a){return(0,r.W)({url:"/web/apps/gongqi.hsb.energy/energyEqmTable/pointQuery?eqmId="+e+"&fromDate="+t+"&toDate="+a,method:"GET"})}function u(e,t,a){return(0,r.W)({url:"/web/apps/gongqi.hsb.elec/elecEqmTable/pointQuery?elecEqmId="+e+"&fromDate="+t+"&toDate="+a,method:"GET"})}var m=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"","close-on-click-modal":!1,visible:e.dialogVisible,modal:!1,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?t("div",{staticClass:"dialog_content",staticStyle:{width:"100%",height:"6rem","margin-top":"0rem"}},[t("el-input",{staticStyle:{"margin-bottom":"0.15rem"},attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},on:{input:e.changeValue},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100%"}},[t("el-table-column",{attrs:{prop:"name",label:"中文名"}}),t("el-table-column",{attrs:{prop:"POINT_NO",label:"POINT_NO"}}),t("el-table-column",{attrs:{prop:"COLL_DATE",label:"COLL_DATE"}}),t("el-table-column",{attrs:{prop:"Value",label:"值"}}),t("el-table-column",{attrs:{prop:"UnitCHN",label:"单位CHN"}})],1)],1):e._e()])],1)},p=[],b={data(){return{searchInput:"",dialogVisible:!1,tableData:[],tableDataBase:[]}},watch:{},mounted(){},methods:{changeValue(e){if(""==e)return void(this.tableData=this.tableDataBase);let t=[];this.tableDataBase.forEach((a=>{a.name.includes(e)&&t.push(a)})),this.tableData=t},showDialogFun(e){this.searchInput="",this.dialogVisible=!0,this.tableData=e,this.tableDataBase=e}}},y=b,g=a(1001),T=(0,g.Z)(y,m,p,!1,null,"e888d8b6",null),f=T.exports,I=a(8745),D={components:{pointDialog:f},data(){return{data:[],defaultProps:{children:"children",label:"label"},tabsArry:[{name:"配电房",show:!1},{name:"能源",show:!1},{name:"光伏",show:!1}],tabIndex:-1,tableData:[],tableHeader:[],subTableData:[],subTableHeader:[],date1:"",date2:"",rowData:{}}},mounted(){this.elePlacesFun();let e=JSON.parse(sessionStorage.getItem("menuPermissions"));this.tabsArry=[{name:"配电房",show:e.isPDF},{name:"能源",show:e.isNY},{name:"光伏",show:e.isGF}],e.isPDF?this.tabIndex=0:e.isNY?this.tabIndex=1:e.isGF&&(this.tabIndex=2),this.date1=this.date2=this.$getDate().year+"-"+this.$getDate().month+"-"+this.$getDate().day},methods:{changeTab(e){this.tabIndex=e,0==e?this.elePlacesFun():1==e?this.placesFun():this.pvPlacesFun()},placesFun(){(0,I.x6)().then((e=>{let t=!1,a=e.content;a.forEach((e=>{t||(this.areaId=e.id,this.areaType=e.type,t=!0)})),this.data=this.$arrToTree(a),this.energyEqmTableListFun()})).catch((e=>{}))},elePlacesFun(){(0,I.bv)().then((e=>{let t=!1,a=e.content;a.forEach((e=>{t||(this.areaId=e.id,this.areaType=e.type,t=!0)})),this.data=this.$arrToTree(a),console.log(this.data),this.elecEqmTableListFun()})).catch((e=>{}))},pvPlacesFun(){(0,I.d1)().then((e=>{let t=!1,a=e.content;a.forEach((e=>{t||(this.areaId=e.id,this.areaType=e.type,t=!0)})),this.data=this.$arrToTree(a),console.log(this.data),this.pvEqmTableListFun()})).catch((e=>{}))},nodeClick(e){this.areaId=e.id,this.areaType=e.type,0==this.tabIndex?this.elecEqmTableListFun():1==this.tabIndex?this.energyEqmTableListFun():this.pvEqmTableListFun()},elecEqmTableListFun(){(0,s.d9)(this.areaId,this.areaType).then((e=>{const{content:t,errcode:a,errmsg:n}=e;if(0==a){this.tableData=t,this.tableHeader=[{name:"园区编号",key:"areaId"},{name:"企业编号",key:"companyId"},{name:"电站名称",key:"elecStationId"},{name:"位置",key:"position"},{name:"设备编号",key:"elecEqmId"},{name:"设备名称",key:"elecEqmName"},{name:"设备状态",key:"elecEqmState"},{name:"IDPOWERSUPPLY",key:"iDPOWERSUPPLY"}],this.rowData=t[0]?t[0]:{};let e=t[0]?t[0].elecEqmId:"";this.pointListFun(e)}})).catch((e=>{}))},energyEqmTableListFun(){(0,s.Rz)(this.areaId,this.areaType).then((e=>{const{content:t,errcode:a,errmsg:n}=e;if(0==a){this.tableData=t,this.tableHeader=[{name:"设备类型",key:"energyType"},{name:"园区编号",key:"areaId"},{name:"企业编号",key:"companyId"},{name:"电站编号",key:"energyStationId"},{name:"位置",key:"position"},{name:"设备编号",key:"equipmentId"},{name:"设备名称",key:"equipmentName"},{name:"设备状态",key:"energyEqmState"},{name:"IDPOWERSUPPLY",key:"iDPOWERSUPPLY"}],this.rowData=t[0]?t[0]:{};let e=t[0]?t[0].equipmentId:"";this.energyPointListFun(e)}})).catch((e=>{}))},pvEqmTableListFun(){(0,s.PB)(this.areaId,this.areaType).then((e=>{const{content:t,errcode:a,errmsg:n}=e;if(0==a){this.tableData=t,this.tableHeader=[{name:"企业编号",key:"companyId"},{name:"设备编号",key:"pVEqmId"},{name:"设备名称",key:"pVEqmName"},{name:"设备类型",key:"pVEqmType"},{name:"IDPOWERSUPPLY",key:"iDPOWERSUPPLY"},{name:"气象仪",key:"meteorographEqmId"}],this.rowData=t[0]?t[0]:{};let e=t[0]?t[0].pVEqmId:"";this.pvPointListFun(e)}})).catch((e=>{}))},rowClick(e){this.rowData=e,0==this.tabIndex?this.pointListFun(e.elecEqmId):1==this.tabIndex?this.energyPointListFun(e.equipmentId):this.pvPointListFun(e.pVEqmId)},pointListFun(e){this.subTableHeader=[{name:"测量点名称",key:"pointName"},{name:"测量点类型",key:"elecPointType"},{name:"POINT_NO",key:"pOINT_NO"},{name:"上限设定",key:"limitHighValue"},{name:"下限设定",key:"limitLowValue"},{name:"测量点单位",key:"elecPointUnitId"}],""!=e?l(e).then((e=>{const{content:t,errcode:a,errmsg:n}=e;0==a&&(this.subTableData=t)})).catch((e=>{})):this.subTableData=[]},energyPointListFun(e){this.subTableHeader=[{name:"测量点名称",key:"pointName"},{name:"蒸汽表类型",key:"steamPointType"},{name:"POINT_NO",key:"pOINT_NO"},{name:"上限设定",key:"limitHighValue"},{name:"下限设定",key:"limitLowValue"},{name:"测量点单位",key:"energyPointUnitId"}],""!=e?o(e).then((e=>{const{content:t,errcode:a,errmsg:n}=e;0==a&&(this.subTableData=t)})).catch((e=>{})):this.subTableData=[]},pvPointListFun(e){this.subTableHeader=[{name:"测量点名称",key:"pointName"},{name:"测量点类型",key:"elecMeterPointType"},{name:"POINT_NO",key:"pOINT_NO"},{name:"电流电压标准值",key:"standardValue"},{name:"上限设定",key:"limitHighValue"},{name:"下限设定",key:"limitLowValue"},{name:"测量点单位",key:"pVPointType"}],""!=e?c(e).then((e=>{const{content:t,errcode:a,errmsg:n}=e;0==a&&(this.subTableData=t)})).catch((e=>{})):this.subTableData=[]},pointQueryFun(){0==this.tabIndex?this.elePointQueryFun(this.rowData.elecEqmId):1==this.tabIndex?this.energyPointQueryFun(this.rowData.equipmentId):this.pvPointQueryFun(this.rowData.pVEqmId)},pvPointQueryFun(e){h(e,this.date1,this.date2).then((e=>{const{content:t,errcode:a,errmsg:n}=e;if(0==a){let e=[];t.forEach((t=>{e.push({name:t.pointName,POINT_NO:t.POINT_NO,COLL_DATE:t.COLL_DATE,Value:t.Value,UnitCHN:t.UnitCHN})})),this.$refs.pDialog.showDialogFun(e)}})).catch((e=>{}))},energyPointQueryFun(e){d(e,this.date1,this.date2).then((e=>{const{content:t,errcode:a,errmsg:n}=e;if(0==a){let e=[];t.forEach((t=>{e.push({name:t.energyPointUnitId,POINT_NO:t.POINT_NO,COLL_DATE:t.COLL_DATE,Value:t.DATA_VALUE,UnitCHN:t.UnitId})})),this.$refs.pDialog.showDialogFun(e)}})).catch((e=>{}))},elePointQueryFun(e){u(e,this.date1,this.date2).then((e=>{const{content:t,errcode:a,errmsg:n}=e;if(0==a){let e=[];t.forEach((t=>{e.push({name:t.elecPointUnitId,POINT_NO:t.POINT_NO,COLL_DATE:t.COLL_DATE,Value:t.Value,UnitCHN:t.UnitCHN})})),this.$refs.pDialog.showDialogFun(e)}})).catch((e=>{}))}}},k=D,E=(0,g.Z)(k,n,i,!1,null,"0d245296",null),P=E.exports},8745:function(e,t,a){a.d(t,{Jw:function(){return o},KQ:function(){return s},WI:function(){return c},bv:function(){return r},d1:function(){return l},x6:function(){return i}});var n=a(88304);function i(){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/places",method:"POST"})}function s(){return(0,n.W)({url:"/web/apps/gongqi.hsb.elec/elecDrawAction/places",method:"POST"})}function r(){return(0,n.W)({method:"POST"})}function l(){return(0,n.W)({url:"/web/apps/gongqi.hsb.pv/pvStationTwoAction/places",method:"POST"})}function o(e,t,a,i,s){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyTrend?dateType="+e+"&energyType="+t+"&fromDate="+a+"&id="+s+"&toDate="+i,method:"POST"})}function c(e,t,a,i,s){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyManageAction/energyBalance?dateType="+e+"&energyType="+t+"&fromDate="+a+"&id="+s+"&toDate="+i,method:"POST"})}},83500:function(e,t,a){a.d(t,{PB:function(){return i},Rz:function(){return r},d9:function(){return s}});var n=a(88304);function i(e,t){return(0,n.W)({url:"/web/apps/gongqi.hsb.pv/pvEqmTable/list?id="+e+"&type="+t,method:"GET"})}function s(e,t){return(0,n.W)({url:"/web/apps/gongqi.hsb.elec/elecEqmTable/list?id="+e+"&type="+t,method:"GET"})}function r(e,t){return(0,n.W)({url:"/web/apps/gongqi.hsb.energy/energyEqmTable/list?id="+e+"&type="+t,method:"GET"})}}}]);
//# sourceMappingURL=712.230bc0c1.js.map